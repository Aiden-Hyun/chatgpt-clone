import React, { createContext, ReactNode, useCallback, useContext, useEffect, useMemo, useState } from 'react';

// Define the translation function type
type TranslationFunction = (key: string) => string;

// Define the context type
interface LanguageContextType {
  t: TranslationFunction;
  currentLanguage: string;
  setLanguage: (language: string) => void;
}

// Create the context
const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Translation data
const translations: Record<string, Record<string, string>> = {
  en: {
    // Common
    'common.loading': 'Loading',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.cancel': 'Cancel',
    'common.save': 'Save',
    'common.edit': 'Edit',
    'common.delete': 'Delete',
    'common.back': 'Back',
    'common.next': 'Next',
    'common.previous': 'Previous',
    'common.close': 'Close',
    'common.ok': 'OK',
    'common.yes': 'Yes',
    'common.no': 'No',
    
    // Auth
    'auth.welcome': 'Welcome',
    'auth.login_with_google': 'Login with Google',
    'auth.redirecting': 'Redirecting...',
    'auth.or': 'or',
    'auth.sign_in_with_email': 'Sign in with Email',
    'auth.create_account': 'Create Account',
    'auth.test_navigation': 'Test Navigation',
    'auth.retry_connection': 'Retry Connection',
    'auth.email': 'Email',
    'auth.password': 'Password',
    'auth.confirm_password': 'Confirm Password',
    'auth.forgot_password': 'Forgot Password?',
    'auth.sign_in': 'Sign In',
    'auth.sign_up': 'Sign Up',
    'auth.reset_password': 'Reset Password',
    'auth.send_reset_email': 'Send Reset Email',
    'auth.password_reset_sent': 'Password reset email sent',
    'auth.check_email_instructions': 'Please check your email and follow the instructions',
    'auth.account_created': 'Account Created Successfully!',
    'auth.confirm_email_instructions': 'Please check your email and click the confirmation link to activate your account. You can then sign in.',
    'auth.signup_failed': 'Signup Failed',
    'auth.signin_failed': 'Sign In Failed',
    'auth.login_successful': 'Login successful!',
    'auth.check_credentials': 'Failed to sign in. Please check your credentials and try again.',
    'auth.unexpected_error': 'An unexpected error occurred. Please try again.',
    'auth.network_error': 'Network error. Please check your internet connection and try again.',
    'auth.google_login_failed': 'Google login failed. Please try again.',
    'auth.enter_email': 'Please enter your email address',
    'auth.enter_valid_email': 'Please enter a valid email address',
    'auth.enter_password': 'Please enter your password',
    'auth.passwords_must_match': 'Passwords must match',
    'auth.password_too_short': 'Password must be at least 6 characters',
    
    // Auth Button States
    'auth.signing_in': 'Signing In...',
    'auth.signing_up': 'Signing Up...',
    
    // Auth Links
    'auth.forgot_password_link': 'Forgot Password?',
    'auth.no_account_link': 'Don\'t have an account? Sign Up',
    'auth.have_account_link': 'Already have an account? Sign In',
    
    // Home
    'home.hello': 'Hello',
    'home.no_conversations': 'No conversations yet',
    'home.new_conversation': 'New Conversation',
    'home.logout': 'Logout',
    'home.logging_out': 'Logging out...',
    
    // Settings
    'settings.title': 'Settings',
    'settings.account': 'Account',
    'settings.preferences': 'Preferences',
    'settings.data_privacy': 'Data & Privacy',
    'settings.about': 'About',
    'settings.name': 'Name',
    'settings.email': 'Email',
    'settings.language': 'Language',
    'settings.theme': 'Theme',
    'settings.notifications': 'Notifications',
    'settings.dark_mode': 'Dark Mode',
    'settings.export_data': 'Export Data',
    'settings.clear_conversations': 'Clear All Conversations',
    'settings.privacy_policy': 'Privacy Policy',
    'settings.version': 'Version',
    'settings.terms_of_service': 'Terms of Service',
    'settings.support': 'Support',
    'settings.not_set': 'Not set',
    'settings.name_updated': 'Name updated successfully',
    'settings.name_update_failed': 'Failed to update name. Please try again.',
    'settings.name_empty': 'Name cannot be empty',
    
    // Chat
    'chat.new_message': 'Type a message...',
    'chat.send': 'Send',
    'chat.thinking': 'Thinking...',
    'chat.regenerate': 'Regenerate',
    'chat.copy': 'Copy',
    'chat.delete': 'Delete',
    'chat.room_deleted': 'Chat room deleted successfully',
    'chat.placeholder': 'Type a message...',
    'chat.sending': '...',
    
    // Sidebar
    'sidebar.new_chat': 'New Chat',
    'sidebar.no_messages': 'No messages yet',
    'sidebar.user': 'User',
    
    // Menu
    'menu.settings': 'Settings',
    'menu.design_showcase': 'Design Showcase',
    'menu.ai_model': 'AI Model',
    'menu.back': 'Back',
    'menu.logout': 'Logout',
    
    // Design Showcase
    'showcase.title': 'Design Showcase',
    'showcase.buttons': 'Buttons',
    'showcase.primary_buttons': 'Primary Buttons',
    'showcase.secondary_buttons': 'Secondary Buttons',
    'showcase.outline_ghost_buttons': 'Outline & Ghost Buttons',
    'showcase.status_buttons': 'Status Buttons',
    'showcase.button_sizes': 'Button Sizes',
    'showcase.input_fields': 'Input Fields',
    'showcase.text_input': 'Text Input',
    'showcase.chat_input': 'Chat Input (Multi-line)',
    'showcase.switches': 'Switches',
    'showcase.toggle_switch': 'Toggle Switch',
    'showcase.language_selector': 'Language Selector',
    'showcase.toast_notifications': 'Toast Notifications',
    'showcase.alert_dialogs': 'Alert Dialogs',
    'showcase.test_toast_types': 'Test different toast types',
    'showcase.test_alert_types': 'Test different alert types',
    
    // Button Labels
    'button.primary': 'Primary',
    'button.secondary': 'Secondary',
    'button.outline': 'Outline',
    'button.ghost': 'Ghost',
    'button.success': 'Success',
    'button.danger': 'Danger',
    'button.disabled': 'Disabled',
    'button.small': 'Small',
    'button.medium': 'Medium',
    'button.large': 'Large',
    'button.send': 'Send',
    
    // Status Labels
    'status.success': 'Success',
    'status.error': 'Error',
    'status.warning': 'Warning',
    'status.info': 'Info',
    
    // Placeholders
    'placeholder.enter_text': 'Enter text here...',
    'placeholder.type_message': 'Type a message...',
    
    // Messages
    'message.success_toast': 'Success toast message!',
    'message.error_toast': 'Error toast message!',
    'message.warning_toast': 'Warning toast message!',
    'message.info_toast': 'Info toast message!',
    'message.success_alert': 'This is a success alert message!',
    'message.error_alert': 'This is an error alert message!',
    
    // Auth Placeholders
    'auth.placeholder.email': 'Email',
    'auth.placeholder.password': 'Password',
    'auth.placeholder.confirm_password': 'Confirm Password',
    
    // Welcome Messages
    'welcome.how_are_you': 'How are you doing today? üòä',
    'welcome.whats_on_mind': 'What\'s on your mind? ü§î',
    'welcome.how_can_help': 'How can I assist you today? ‚ú®',
    'welcome.what_to_chat': 'What would you like to chat about? üí¨',
    'welcome.ready_to_help': 'Ready to help you with anything! üöÄ',
    'welcome.shall_we_explore': 'What shall we explore today? üåü',
    'welcome.create_amazing': 'Let\'s create something amazing together! ‚ú®',
    'welcome.next_big_idea': 'What\'s your next big idea? üí°',
    'welcome.ready_adventure': 'Ready for an adventure? üéØ',
    'welcome.help_discover': 'What can I help you discover? üîç',
    
    // Loading Messages
    'loading.thinking': 'Thinking...',
    'loading.analyzing': 'Analyzing your message...',
    'loading.generating': 'Generating response...',
    'loading.processing': 'Processing...',
    'loading.creating': 'Creating thoughtful reply...',
    'loading.almost_ready': 'Almost ready...',
    
    // Explore
    'explore.title': 'Explore',
    'explore.coming_soon': 'Coming soon...',
    
    // Toast Messages
    'toast.language_changed': 'Language successfully changed to {language}',
    'toast.language_changed_es': 'Idioma cambiado exitosamente a {language}',
    'toast.language_changed_ko': 'Ïñ∏Ïñ¥Í∞Ä {language}Î°ú ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§',
  },
  es: {
    // Common
    'common.loading': 'Cargando',
    'common.error': 'Error',
    'common.success': '√âxito',
    'common.cancel': 'Cancelar',
    'common.save': 'Guardar',
    'common.edit': 'Editar',
    'common.delete': 'Eliminar',
    'common.back': 'Atr√°s',
    'common.next': 'Siguiente',
    'common.previous': 'Anterior',
    'common.close': 'Cerrar',
    'common.ok': 'OK',
    'common.yes': 'S√≠',
    'common.no': 'No',
    
    // Auth
    'auth.welcome': 'Bienvenido',
    'auth.login_with_google': 'Iniciar sesi√≥n con Google',
    'auth.redirecting': 'Redirigiendo...',
    'auth.or': 'o',
    'auth.sign_in_with_email': 'Iniciar sesi√≥n con Email',
    'auth.create_account': 'Crear Cuenta',
    'auth.test_navigation': 'Probar Navegaci√≥n',
    'auth.retry_connection': 'Reintentar Conexi√≥n',
    'auth.email': 'Correo electr√≥nico',
    'auth.password': 'Contrase√±a',
    'auth.confirm_password': 'Confirmar Contrase√±a',
    'auth.forgot_password': '¬øOlvidaste tu contrase√±a?',
    'auth.sign_in': 'Iniciar Sesi√≥n',
    'auth.sign_up': 'Registrarse',
    'auth.reset_password': 'Restablecer Contrase√±a',
    'auth.send_reset_email': 'Enviar Email de Restablecimiento',
    'auth.password_reset_sent': 'Email de restablecimiento de contrase√±a enviado',
    'auth.check_email_instructions': 'Por favor revisa tu correo y sigue las instrucciones',
    'auth.account_created': '¬°Cuenta Creada Exitosamente!',
    'auth.confirm_email_instructions': 'Por favor revisa tu correo y haz clic en el enlace de confirmaci√≥n para activar tu cuenta. Luego podr√°s iniciar sesi√≥n.',
    'auth.signup_failed': 'Registro Fallido',
    'auth.signin_failed': 'Inicio de Sesi√≥n Fallido',
    'auth.login_successful': '¬°Inicio de sesi√≥n exitoso!',
    'auth.check_credentials': 'No se pudo iniciar sesi√≥n. Por favor verifica tus credenciales e intenta de nuevo.',
    'auth.unexpected_error': 'Ocurri√≥ un error inesperado. Por favor intenta de nuevo.',
    'auth.network_error': 'Error de red. Por favor verifica tu conexi√≥n a internet e intenta de nuevo.',
    'auth.google_login_failed': 'Error en inicio de sesi√≥n con Google. Por favor intenta de nuevo.',
    'auth.enter_email': 'Por favor ingresa tu direcci√≥n de correo',
    'auth.enter_valid_email': 'Por favor ingresa un correo v√°lido',
    'auth.enter_password': 'Por favor ingresa tu contrase√±a',
    'auth.passwords_must_match': 'Las contrase√±as deben coincidir',
    'auth.password_too_short': 'La contrase√±a debe tener al menos 6 caracteres',
    
    // Auth Button States
    'auth.signing_in': 'Iniciando Sesi√≥n...',
    'auth.signing_up': 'Registrando...',
    
    // Auth Links
    'auth.forgot_password_link': '¬øOlvidaste tu contrase√±a?',
    'auth.no_account_link': '¬øNo tienes una cuenta? Reg√≠strate',
    'auth.have_account_link': '¬øYa tienes una cuenta? Inicia Sesi√≥n',
    
    // Home
    'home.hello': 'Hola',
    'home.no_conversations': 'A√∫n no hay conversaciones',
    'home.new_conversation': 'Nueva Conversaci√≥n',
    'home.logout': 'Cerrar Sesi√≥n',
    'home.logging_out': 'Cerrando sesi√≥n...',
    
    // Settings
    'settings.title': 'Configuraci√≥n',
    'settings.account': 'Cuenta',
    'settings.preferences': 'Preferencias',
    'settings.data_privacy': 'Datos y Privacidad',
    'settings.about': 'Acerca de',
    'settings.name': 'Nombre',
    'settings.email': 'Correo',
    'settings.language': 'Idioma',
    'settings.theme': 'Tema',
    'settings.notifications': 'Notificaciones',
    'settings.dark_mode': 'Modo Oscuro',
    'settings.export_data': 'Exportar Datos',
    'settings.clear_conversations': 'Borrar Todas las Conversaciones',
    'settings.privacy_policy': 'Pol√≠tica de Privacidad',
    'settings.version': 'Versi√≥n',
    'settings.terms_of_service': 'T√©rminos de Servicio',
    'settings.support': 'Soporte',
    'settings.not_set': 'No establecido',
    'settings.name_updated': 'Nombre actualizado exitosamente',
    'settings.name_update_failed': 'No se pudo actualizar el nombre. Por favor intenta de nuevo.',
    'settings.name_empty': 'El nombre no puede estar vac√≠o',
    
    // Chat
    'chat.new_message': 'Escribe un mensaje...',
    'chat.send': 'Enviar',
    'chat.thinking': 'Pensando...',
    'chat.regenerate': 'Regenerar',
    'chat.copy': 'Copiar',
    'chat.delete': 'Eliminar',
    'chat.room_deleted': 'Sala de chat eliminada exitosamente',
    'chat.placeholder': 'Escribe un mensaje...',
    'chat.sending': '...',
    
    // Sidebar
    'sidebar.new_chat': 'Nueva Conversaci√≥n',
    'sidebar.no_messages': 'A√∫n no hay mensajes',
    'sidebar.user': 'Usuario',
    
    // Menu
    'menu.settings': 'Configuraci√≥n',
    'menu.design_showcase': 'Mostrar Dise√±o',
    'menu.ai_model': 'Modelo AI',
    'menu.back': 'Atr√°s',
    'menu.logout': 'Cerrar Sesi√≥n',
    
    // Design Showcase
    'showcase.title': 'Mostrar Dise√±o',
    'showcase.buttons': 'Botones',
    'showcase.primary_buttons': 'Botones Primarios',
    'showcase.secondary_buttons': 'Botones Secundarios',
    'showcase.outline_ghost_buttons': 'Botones de Contorno y Fantasma',
    'showcase.status_buttons': 'Botones de Estado',
    'showcase.button_sizes': 'Tama√±os de Botones',
    'showcase.input_fields': 'Campos de Entrada',
    'showcase.text_input': 'Campo de Texto',
    'showcase.chat_input': 'Campo de Chat (Multil√≠nea)',
    'showcase.switches': 'Interruptores',
    'showcase.toggle_switch': 'Interruptor de Encendido/Apagado',
    'showcase.language_selector': 'Selector de Idioma',
    'showcase.toast_notifications': 'Notificaciones de Toast',
    'showcase.alert_dialogs': 'Di√°logos de Alerta',
    'showcase.test_toast_types': 'Probar diferentes tipos de notificaciones de toast',
    'showcase.test_alert_types': 'Probar diferentes tipos de alertas',
    
    // Button Labels
    'button.primary': 'Primario',
    'button.secondary': 'Secundario',
    'button.outline': 'Contorno',
    'button.ghost': 'Fantasma',
    'button.success': '√âxito',
    'button.danger': 'Peligro',
    'button.disabled': 'Deshabilitado',
    'button.small': 'Peque√±o',
    'button.medium': 'Medio',
    'button.large': 'Grande',
    'button.send': 'Enviar',
    
    // Status Labels
    'status.success': '√âxito',
    'status.error': 'Error',
    'status.warning': 'Advertencia',
    'status.info': 'Informaci√≥n',
    
    // Placeholders
    'placeholder.enter_text': 'Escribe el texto aqu√≠...',
    'placeholder.type_message': 'Escribe un mensaje...',
    
    // Messages
    'message.success_toast': '¬°Mensaje de notificaci√≥n de √©xito!',
    'message.error_toast': '¬°Mensaje de notificaci√≥n de error!',
    'message.warning_toast': '¬°Mensaje de notificaci√≥n de advertencia!',
    'message.info_toast': '¬°Mensaje de notificaci√≥n de informaci√≥n!',
    'message.success_alert': '¬°Este es un mensaje de alerta de √©xito!',
    'message.error_alert': '¬°Este es un mensaje de alerta de error!',
    
    // Auth Placeholders
    'auth.placeholder.email': 'Email',
    'auth.placeholder.password': 'Password',
    'auth.placeholder.confirm_password': 'Confirm Password',
    
    // Welcome Messages
    'welcome.how_are_you': '¬øC√≥mo est√°s hoy? üòä',
    'welcome.whats_on_mind': '¬øQu√© tienes en la cabeza? ü§î',
    'welcome.how_can_help': '¬øC√≥mo puedo ayudarte hoy? ‚ú®',
    'welcome.what_to_chat': '¬øQu√© te gustar√≠a charlar? üí¨',
    'welcome.ready_to_help': '¬°Listo para ayudarte con cualquier cosa! üöÄ',
    'welcome.shall_we_explore': '¬øQu√© vamos a explorar hoy? üåü',
    'welcome.create_amazing': '¬°Vamos a crear algo incre√≠ble juntos! ‚ú®',
    'welcome.next_big_idea': '¬øCu√°l es tu siguiente gran idea? üí°',
    'welcome.ready_adventure': '¬øListo para una aventura? üéØ',
    'welcome.help_discover': '¬øQu√© puedo ayudarte a descubrir? üîç',
    
    // Loading Messages
    'loading.thinking': 'Pensando...',
    'loading.analyzing': 'Analizando tu mensaje...',
    'loading.generating': 'Generando respuesta...',
    'loading.processing': 'Procesando...',
    'loading.creating': 'Creando respuesta reflexiva...',
    'loading.almost_ready': 'Casi listo...',
    
    // Explore
    'explore.title': 'Explorar',
    'explore.coming_soon': 'Pr√≥ximamente...',
    
    // Toast Messages
    'toast.language_changed': 'Language successfully changed to {language}',
    'toast.language_changed_es': 'Idioma cambiado exitosamente a {language}',
    'toast.language_changed_ko': 'Ïñ∏Ïñ¥Í∞Ä {language}Î°ú ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§',
  },
  ko: {
    // Common
    'common.loading': 'Î°úÎî© Ï§ë',
    'common.error': 'Ïò§Î•ò',
    'common.success': 'ÏÑ±Í≥µ',
    'common.cancel': 'Ï∑®ÏÜå',
    'common.save': 'Ï†ÄÏû•',
    'common.edit': 'Ìé∏Ïßë',
    'common.delete': 'ÏÇ≠Ï†ú',
    'common.back': 'Îí§Î°ú',
    'common.next': 'Îã§Ïùå',
    'common.previous': 'Ïù¥Ï†Ñ',
    'common.close': 'Îã´Í∏∞',
    'common.ok': 'ÌôïÏù∏',
    'common.yes': 'Ïòà',
    'common.no': 'ÏïÑÎãàÏò§',
    
    // Auth
    'auth.welcome': 'ÌôòÏòÅÌï©ÎãàÎã§',
    'auth.login_with_google': 'GoogleÎ°ú Î°úÍ∑∏Ïù∏',
    'auth.redirecting': 'Î¶¨Îã§Ïù¥Î†âÌåÖ Ï§ë...',
    'auth.or': 'ÎòêÎäî',
    'auth.sign_in_with_email': 'Ïù¥Î©îÏùºÎ°ú Î°úÍ∑∏Ïù∏',
    'auth.create_account': 'Í≥ÑÏ†ï ÎßåÎì§Í∏∞',
    'auth.test_navigation': 'ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌÖåÏä§Ìä∏',
    'auth.retry_connection': 'Ïó∞Í≤∞ Ïû¨ÏãúÎèÑ',
    'auth.email': 'Ïù¥Î©îÏùº',
    'auth.password': 'ÎπÑÎ∞ÄÎ≤àÌò∏',
    'auth.confirm_password': 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏',
    'auth.forgot_password': 'ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûäÏúºÏÖ®ÎÇòÏöî?',
    'auth.sign_in': 'Î°úÍ∑∏Ïù∏',
    'auth.sign_up': 'ÌöåÏõêÍ∞ÄÏûÖ',
    'auth.reset_password': 'ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï',
    'auth.send_reset_email': 'Ïû¨ÏÑ§Ï†ï Ïù¥Î©îÏùº Î≥¥ÎÇ¥Í∏∞',
    'auth.password_reset_sent': 'ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï Ïù¥Î©îÏùºÏù¥ Ï†ÑÏÜ°ÎêòÏóàÏäµÎãàÎã§',
    'auth.check_email_instructions': 'Ïù¥Î©îÏùºÏùÑ ÌôïÏù∏ÌïòÍ≥† ÏßÄÏãúÏÇ¨Ìï≠ÏùÑ Îî∞ÎùºÏ£ºÏÑ∏Ïöî',
    'auth.account_created': 'Í≥ÑÏ†ïÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§!',
    'auth.confirm_email_instructions': 'Ïù¥Î©îÏùºÏùÑ ÌôïÏù∏ÌïòÍ≥† Í≥ÑÏ†ïÏùÑ ÌôúÏÑ±ÌôîÌïòÍ∏∞ ÏúÑÌï¥ ÌôïÏù∏ ÎßÅÌÅ¨Î•º ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî. Í∑∏ ÌõÑ Î°úÍ∑∏Ïù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.',
    'auth.signup_failed': 'ÌöåÏõêÍ∞ÄÏûÖ Ïã§Ìå®',
    'auth.signin_failed': 'Î°úÍ∑∏Ïù∏ Ïã§Ìå®',
    'auth.login_successful': 'Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ!',
    'auth.check_credentials': 'Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. ÏûêÍ≤© Ï¶ùÎ™ÖÏùÑ ÌôïÏù∏ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
    'auth.unexpected_error': 'ÏòàÏÉÅÏπò Î™ªÌïú Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
    'auth.network_error': 'ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î•òÏûÖÎãàÎã§. Ïù∏ÌÑ∞ÎÑ∑ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ≥† Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
    'auth.google_login_failed': 'Íµ¨Í∏Ä Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
    'auth.enter_email': 'Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî',
    'auth.enter_valid_email': 'Ïú†Ìö®Ìïú Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî',
    'auth.enter_password': 'ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî',
    'auth.passwords_must_match': 'ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÏùºÏπòÌï¥Ïïº Ìï©ÎãàÎã§',
    'auth.password_too_short': 'ÎπÑÎ∞ÄÎ≤àÌò∏Îäî ÏµúÏÜå 6Ïûê Ïù¥ÏÉÅÏù¥Ïñ¥Ïïº Ìï©ÎãàÎã§',
    
    // Auth Button States
    'auth.signing_in': 'Î°úÍ∑∏Ïù∏ Ï§ë...',
    'auth.signing_up': 'ÌöåÏõêÍ∞ÄÏûÖ Ï§ë...',
    
    // Auth Links
    'auth.forgot_password_link': 'ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûäÏúºÏÖ®ÎÇòÏöî?',
    'auth.no_account_link': 'Í≥ÑÏ†ïÏù¥ ÏóÜÏúºÏã†Í∞ÄÏöî? ÌöåÏõêÍ∞ÄÏûÖ',
    'auth.have_account_link': 'Ïù¥ÎØ∏ Í≥ÑÏ†ïÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî? Î°úÍ∑∏Ïù∏',
    
    // Home
    'home.hello': 'ÏïàÎÖïÌïòÏÑ∏Ïöî',
    'home.no_conversations': 'ÏïÑÏßÅ ÎåÄÌôîÍ∞Ä ÏóÜÏäµÎãàÎã§',
    'home.new_conversation': 'ÏÉà ÎåÄÌôî',
    'home.logout': 'Î°úÍ∑∏ÏïÑÏõÉ',
    'home.logging_out': 'Î°úÍ∑∏ÏïÑÏõÉ Ï§ë...',
    
    // Settings
    'settings.title': 'ÏÑ§Ï†ï',
    'settings.account': 'Í≥ÑÏ†ï',
    'settings.preferences': 'ÌôòÍ≤ΩÏÑ§Ï†ï',
    'settings.data_privacy': 'Îç∞Ïù¥ÌÑ∞ Î∞è Í∞úÏù∏Ï†ïÎ≥¥',
    'settings.about': 'Ï†ïÎ≥¥',
    'settings.name': 'Ïù¥Î¶Ñ',
    'settings.email': 'Ïù¥Î©îÏùº',
    'settings.language': 'Ïñ∏Ïñ¥',
    'settings.theme': 'ÌÖåÎßà',
    'settings.notifications': 'ÏïåÎ¶º',
    'settings.dark_mode': 'Îã§ÌÅ¨ Î™®Îìú',
    'settings.export_data': 'Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞',
    'settings.clear_conversations': 'Î™®Îì† ÎåÄÌôî ÏÇ≠Ï†ú',
    'settings.privacy_policy': 'Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨Î∞©Ïπ®',
    'settings.version': 'Î≤ÑÏ†Ñ',
    'settings.terms_of_service': 'ÏÑúÎπÑÏä§ ÏïΩÍ¥Ä',
    'settings.support': 'ÏßÄÏõê',
    'settings.not_set': 'ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏùå',
    'settings.name_updated': 'Ïù¥Î¶ÑÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§',
    'settings.name_update_failed': 'Ïù¥Î¶Ñ ÏóÖÎç∞Ïù¥Ìä∏Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.',
    'settings.name_empty': 'Ïù¥Î¶ÑÏùÄ ÎπÑÏõåÎëò Ïàò ÏóÜÏäµÎãàÎã§',
    
    // Chat
    'chat.new_message': 'Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...',
    'chat.send': 'Î≥¥ÎÇ¥Í∏∞',
    'chat.thinking': 'ÏÉùÍ∞Å Ï§ë...',
    'chat.regenerate': 'Ïû¨ÏÉùÏÑ±',
    'chat.copy': 'Î≥µÏÇ¨',
    'chat.delete': 'ÏÇ≠Ï†ú',
    'chat.room_deleted': 'Ï±ÑÌåÖÎ∞©Ïù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§',
    'chat.placeholder': 'Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...',
    'chat.sending': '...',
    
    // Sidebar
    'sidebar.new_chat': 'ÏÉà ÎåÄÌôî',
    'sidebar.no_messages': 'ÏïÑÏßÅ Î©îÏãúÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§',
    'sidebar.user': 'ÏÇ¨Ïö©Ïûê',
    
    // Menu
    'menu.settings': 'ÏÑ§Ï†ï',
    'menu.design_showcase': 'ÎîîÏûêÏù∏ ÏáºÏºÄÏù¥Ïä§',
    'menu.ai_model': 'AI Î™®Îç∏',
    'menu.back': 'Îí§Î°ú',
    'menu.logout': 'Î°úÍ∑∏ÏïÑÏõÉ',
    
    // Design Showcase
    'showcase.title': 'ÎîîÏûêÏù∏ ÏáºÏºÄÏù¥Ïä§',
    'showcase.buttons': 'Î≤ÑÌäº',
    'showcase.primary_buttons': 'Ï£ºÏöî Î≤ÑÌäº',
    'showcase.secondary_buttons': 'Î≥¥Ï°∞ Î≤ÑÌäº',
    'showcase.outline_ghost_buttons': 'ÏïÑÏõÉÎùºÏù∏ Î∞è ÌôòÌò∏ Î≤ÑÌäº',
    'showcase.status_buttons': 'ÏÉÅÌÉú Î≤ÑÌäº',
    'showcase.button_sizes': 'Î≤ÑÌäº ÌÅ¨Í∏∞',
    'showcase.input_fields': 'ÏûÖÎ†• ÌïÑÎìú',
    'showcase.text_input': 'ÌÖçÏä§Ìä∏ ÏûÖÎ†•',
    'showcase.chat_input': 'Ï±ÑÌåÖ ÏûÖÎ†• (Ïó¨Îü¨ Ï§Ñ)',
    'showcase.switches': 'Ïä§ÏúÑÏπò',
    'showcase.toggle_switch': 'ÌÜ†Í∏Ä Ïä§ÏúÑÏπò',
    'showcase.language_selector': 'Ïñ∏Ïñ¥ ÏÑ†ÌÉùÍ∏∞',
    'showcase.toast_notifications': 'ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º',
    'showcase.alert_dialogs': 'Í≤ΩÍ≥† ÎåÄÌôî ÏÉÅÏûê',
    'showcase.test_toast_types': 'Îã§Î•∏ ÌÜ†Ïä§Ìä∏ Ïú†Ìòï ÌÖåÏä§Ìä∏',
    'showcase.test_alert_types': 'Îã§Î•∏ Í≤ΩÍ≥† Ïú†Ìòï ÌÖåÏä§Ìä∏',
    
    // Button Labels
    'button.primary': 'Ï£ºÏöî',
    'button.secondary': 'Î≥¥Ï°∞',
    'button.outline': 'ÏïÑÏõÉÎùºÏù∏',
    'button.ghost': 'ÌôòÌò∏',
    'button.success': 'ÏÑ±Í≥µ',
    'button.danger': 'ÏúÑÌóò',
    'button.disabled': 'ÎπÑÌôúÏÑ±Ìôî',
    'button.small': 'ÏûëÏùÄ',
    'button.medium': 'Ï§ëÍ∞Ñ',
    'button.large': 'ÌÅ∞',
    'button.send': 'Î≥¥ÎÇ¥Í∏∞',
    
    // Status Labels
    'status.success': 'ÏÑ±Í≥µ',
    'status.error': 'Ïò§Î•ò',
    'status.warning': 'Í≤ΩÍ≥†',
    'status.info': 'Ï†ïÎ≥¥',
    
    // Placeholders
    'placeholder.enter_text': 'Ïó¨Í∏∞Ïóê ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...',
    'placeholder.type_message': 'Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî...',
    
    // Messages
    'message.success_toast': 'ÏÑ±Í≥µÏ†ÅÏù∏ ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ!',
    'message.error_toast': 'Ïò§Î•ò ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ!',
    'message.warning_toast': 'Í≤ΩÍ≥† ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ!',
    'message.info_toast': 'Ï†ïÎ≥¥ ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ!',
    'message.success_alert': 'Ïù¥Í≤ÉÏùÄ ÏÑ±Í≥µÏ†ÅÏù∏ Í≤ΩÍ≥† Î©îÏãúÏßÄÏûÖÎãàÎã§!',
    'message.error_alert': 'Ïù¥Í≤ÉÏùÄ Ïò§Î•ò Í≤ΩÍ≥† Î©îÏãúÏßÄÏûÖÎãàÎã§!',
    
    // Auth Placeholders
    'auth.placeholder.email': 'Email',
    'auth.placeholder.password': 'Password',
    'auth.placeholder.confirm_password': 'Confirm Password',
    
    // Welcome Messages
    'welcome.how_are_you': 'Ïñ¥ÎñªÍ≤å ÏßÄÎÇ¥ÏÑ∏Ïöî? üòä',
    'welcome.whats_on_mind': 'Î¨¥Ïä® ÏÉùÍ∞ÅÏù¥ ÎìúÏãúÎÇòÏöî? ü§î',
    'welcome.how_can_help': 'Ïñ¥ÎñªÍ≤å ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî? ‚ú®',
    'welcome.what_to_chat': 'Ïñ¥Îñ§ Ï£ºÏ†úÎ°ú ÎåÄÌôîÎ•º ÎÇòÎàÑÍ≥† Ïã∂ÏúºÏÑ∏Ïöî? üí¨',
    'welcome.ready_to_help': 'Î¨¥ÏóáÏù¥Îì† ÎèÑÏôÄÎìúÎ¶¥ Ï§ÄÎπÑÍ∞Ä ÎêòÏóàÏäµÎãàÎã§! üöÄ',
    'welcome.shall_we_explore': 'Ïò§Îäò Î¨¥ÏóáÏùÑ ÌÉêÏÉâÌï¥Î≥ºÍπåÏöî? üåü',
    'welcome.create_amazing': 'Ìï®Íªò Î©ãÏßÑ Í≤ÉÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏïÑÏöî! ‚ú®',
    'welcome.next_big_idea': 'Îã§Ïùå ÌÅ∞ ÏïÑÏù¥ÎîîÏñ¥Îäî Î¨¥ÏóáÏù∏Í∞ÄÏöî? üí°',
    'welcome.ready_adventure': 'Î™®ÌóòÏùÑ Ï§ÄÎπÑÌïòÏãúÎÇòÏöî? üéØ',
    'welcome.help_discover': 'Î¨¥ÏóáÏùÑ ÎèÑÏôÄÎìúÎ¶¥ Ïàò ÏûàÏùÑÍπåÏöî? üîç',
    
    // Loading Messages
    'loading.thinking': 'ÏÉùÍ∞Å Ï§ë...',
    'loading.analyzing': 'Î©îÏãúÏßÄÎ•º Î∂ÑÏÑùÌïòÎäî Ï§ë...',
    'loading.generating': 'ÎãµÎ≥ÄÏùÑ ÏÉùÏÑ±ÌïòÎäî Ï§ë...',
    'loading.processing': 'Ï≤òÎ¶¨ Ï§ë...',
    'loading.creating': 'Ïã†Ï§ëÌïú ÎãµÎ≥ÄÏùÑ ÎßåÎìúÎäî Ï§ë...',
    'loading.almost_ready': 'Í±∞Ïùò ÏôÑÎ£å...',
    
    // Explore
    'explore.title': 'ÌÉêÏÉâ',
    'explore.coming_soon': 'Í≥ß Ï∂úÏãú ÏòàÏ†ï...',
    
    // Toast Messages
    'toast.language_changed': 'Language successfully changed to {language}',
    'toast.language_changed_es': 'Idioma cambiado exitosamente a {language}',
    'toast.language_changed_ko': 'Ïñ∏Ïñ¥Í∞Ä {language}Î°ú ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§',
  }
};

// Language provider component
interface LanguageProviderProps {
  children: ReactNode;
}

export const LanguageProvider: React.FC<LanguageProviderProps> = ({ children }) => {
  const [currentLanguage, setCurrentLanguage] = useState('en');

  // Debug when currentLanguage changes
  useEffect(() => {
    console.log('üåç Language changed to:', currentLanguage);
  }, [currentLanguage]);

  // üéØ STEP 3: Memoize translation function to prevent recreation
  const t: TranslationFunction = useCallback((key: string) => {
    const languageTranslations = translations[currentLanguage] || translations.en;
    return languageTranslations[key] || key;
  }, [currentLanguage]); // Only recreate when language actually changes

  // üéØ STEP 3: Memoize setLanguage function to prevent recreation
  const setLanguage = useCallback((language: string) => {
    console.log('üåç setLanguage called with:', language);
    console.log('üåç Available languages:', Object.keys(translations));
    if (translations[language]) {
      console.log('üåç Setting language to:', language);
      setCurrentLanguage(language);
    } else {
      console.log('üåç Language not found:', language);
    }
  }, []); // Stable function - no dependencies needed

  // üéØ STEP 3: Memoize LanguageContext value to prevent unnecessary re-renders
  const value = useMemo(() => ({
    t,
    currentLanguage,
    setLanguage,
  }), [t, currentLanguage, setLanguage]); // Only recreate when these actually change

  return (
    <LanguageContext.Provider value={value}>
      {children}
    </LanguageContext.Provider>
  );
};

// Hook to use the language context
export const useLanguageContext = (): LanguageContextType => {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguageContext must be used within a LanguageProvider');
  }
  return context;
}; 